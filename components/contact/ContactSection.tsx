// function ContactSection() {
//   return (
//     <div>
//       <section className="contact-us-section">
//         <div className="contact-container">
//           <div className="contact-us-column-grid">
//             <div
//               id="w-node-_78c3fced-68de-f04d-8282-61f416ab32d0-fbbea1d4"
//               className="grid-column-left"
//             ></div>
//             <div
//               id="w-node-_78c3fced-68de-f04d-8282-61f416ab32d1-fbbea1d4"
//               className="grid-col-right"
//             >
//               <div className="form-contacts-right">
//                 <div className="subscribe-form-2">
//                   <div className="form-text-wrapper">
//                     <div className="top-form-wrapper">
//                       <div
//                         data-w-id="78c3fced-68de-f04d-8282-61f416ab32d6"
                        
//                         className="subtitle-wrap"
//                       >
//                         <h6 className="black-subtitle">
//                           Contact Our Friendly Support Team Now!
//                         </h6>
//                       </div>
//                       <h1
//                         data-w-id="78c3fced-68de-f04d-8282-61f416ab32d9"
                        
//                         className="contact-us-top-title"
//                       >
//                         Contact Us!
//                       </h1>
//                     </div>
//                     <p
//                       data-w-id="78c3fced-68de-f04d-8282-61f416ab32db"
                      
//                       className="form-description"
//                     >
//                       Schedule your service appointment today to ensure your
//                       vehicle receives top-notch care from our expert
//                       technicians. Don't wait â€“ keep your car running smoothly
//                       with a quick and easy booking.
//                     </p>
//                   </div>
//                   <div
//                     data-w-id="78c3fced-68de-f04d-8282-61f416ab32dd"
                    
//                     className="large-contacts-form"
//                   >
//                     <div className="pop-up-form w-form">
//                       <form
//                         id="email-form-2"
//                         name="email-form-2"
//                         data-name="Email Form 2"
//                         method="get"
//                         className="contacts-form"
//                         data-wf-page-id="669e1212d181ce4bfbbea1d4"
//                         data-wf-element-id="78c3fced-68de-f04d-8282-61f416ab32df"
//                       >
//                         <div className="grid-contact-input">
//                           <div className="form-input-wrapper">
//                             <input
//                               className="form-input-no-space w-input"
//                               maxLength={256}
//                               name="email-3"
//                               data-name="Email 3"
//                               placeholder="name"
//                               type="tel"
//                               id="email-3"
//                               required
//                             />
//                           </div>
//                           <div className="form-input-wrapper">
//                             <input
//                               className="form-input-no-space w-input"
//                               maxLength={256}
//                               name="email-3"
//                               data-name="Email 3"
//                               placeholder="email"
//                               type="email"
//                               id="email-3"
//                               required
//                             />
//                           </div>
//                         </div>
//                         <div className="contact-form-inputs">
//                           <input
//                             className="form-input w-input"
//                             maxLength={256}
//                             name="email-3"
//                             data-name="Email 3"
//                             placeholder="Phone"
//                             type="tel"
//                             id="email-3"
//                             required
//                           />
//                         </div>
//                         <div className="form-hero-btn">
//                           <input
//                             type="submit"
//                             data-wait="Please Wait"
//                             className="primary-button-form w-button"
//                             value="Let's Get Started!"
//                           />
//                         </div>
//                       </form>
//                       <div className="succes-message-transparent w-form-done">
//                         <div className="success-circle-wrapper">
//                           <div className="success-text">
//                             <span className="thank-you-text">Thank you!</span>
//                             Your submission has been received!
//                           </div>
//                         </div>
//                       </div>
//                       <div className="error-project-message w-form-fail">
//                         <div className="error-text">
//                           <span className="error-span">Ooooooops!</span>
//                           Something went wrong while submitting the form.
//                         </div>
//                       </div>
//                     </div>
//                   </div>
//                   <div className="page-square-print form-top-left"></div>
//                   <div className="page-square-print form-top-right"></div>
//                   <div className="page-square-print form-bottom-left"></div>
//                   <div className="page-square-print form-bottom-right"></div>
//                 </div>
//               </div>
//             </div>
//             <div className="top-cta-line contact-us"></div>
//             <div className="bottom-cta-line contact-us"></div>
//           </div>
//         </div>
//         <div className="contact-video-wrapper">
//           <div
//             data-poster-url="https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-poster-00001.jpg"
//             data-video-urls="https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-transcode.mp4,https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-transcode.webm"
//             data-autoplay="true"
//             data-loop="true"
//             data-wf-ignore="true"
//             className="cta-hero-video-banner w-background-video w-background-video-atom"
//           >
//             <video
//               id="9d342e77-3e3b-a55a-ed5d-00e6fcdd5823-video"
//               autoPlay
//               loop
//               style={{
//                 backgroundImage:
//                   'url("https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-poster-00001.jpg")',
//               }}
//               muted
//               playsInline
//               data-wf-ignore="true"
//               data-object-fit="cover"
//             >
//               <source
//                 src="https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-transcode.mp4"
//                 data-wf-ignore="true"
//               />
//               <source
//                 src="https://cdn.prod.website-files.com/669e1212d181ce4bfbbea175%2F66a3c55c5850950cb4c365dc_4228659%20hd%201920%201080%2025fps-transcode.webm"
//                 data-wf-ignore="true"
//               />
//             </video>
//             <div className="cta-overlay"></div>
//           </div>
//         </div>
//       </section>
//       <div className="relative-page-wrapper">
//         <section className="section top-smaller-space">
//           <div className="base-container">
//             <div className="top-title-wrapper">
//               <div className="flex-wrap-left">
//                 <div className="subtitle-wrap">
//                   <h6
//                     data-w-id="3550ba95-b759-eb1e-2404-477f761866b3"
                    
//                     className="black-subtitle"
//                   >
//                     Find Answers to Your Most Frequently Asked Questions
//                   </h6>
//                 </div>
//                 <h2
//                   data-w-id="3550ba95-b759-eb1e-2404-477f761866b5"
                  
//                   className="shop-title"
//                 >
//                   Have Questions About Our Services? FAQ for Answers
//                 </h2>
//               </div>
//               <div
//                 data-w-id="3550ba95-b759-eb1e-2404-477f761866b7"
                
//                 className="flex-wrap-right"
//               >
//                 <a href="/our-team" className="primary-button w-button">
//                   Carsy experts
//                 </a>
//               </div>
//             </div>
//             <div className="grid-faq-wrapper">
//               <div
//                 data-w-id="87bb22ab-e18b-4f40-c705-713a25c450cb"
                
//                 className="faq-grid-item"
//               >
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         What services do you offer?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         At Carsy, we provide a comprehensive range of automotive
//                         services to keep your vehicle in top condition. Our
//                         offerings include brake repair, engine repair, tire
//                         repair, cooling system service, battery repair, steering
//                         repair, transmission service, oil changes, exhaust
//                         system repair, wheel alignment, air conditioning repair,
//                         electrical system repair, radiator service, timing belt
//                         replacement, windshield repair, differential repair,
//                         clutch repair, and emissions testing and repair. Our
//                         expert technicians use state-of-the-art technology and
//                         follow best industry practices to ensure your vehicle
//                         receives the best care possible.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         How do I schedule an appointment?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         Scheduling an appointment with Carsy is easy and
//                         convenient. You can book an appointment online through
//                         our website by selecting your preferred date and time.
//                         Alternatively, you can call our customer service team,
//                         who will assist you in finding a suitable slot. We
//                         recommend booking in advance to ensure availability,
//                         especially during peak times. Once your appointment is
//                         confirmed, our team will be ready to provide the
//                         high-quality service you expect from Carsy.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         How do I maintain my car's battery?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         Maintaining your car's battery involves regular
//                         inspections and proper care. Ensure the battery
//                         terminals are clean and free of corrosion, and check the
//                         battery's charge level periodically. Avoid leaving your
//                         lights or electronic devices on when the engine is off,
//                         as this can drain the battery. During extreme weather
//                         conditions, such as very hot or cold temperatures, the
//                         battery may require additional attention. At Carsy, we
//                         offer battery testing and maintenance services to keep
//                         your battery in optimal condition and prevent unexpected
//                         failures.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         What does the check engine light mean?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         The check engine light can indicate various issues,
//                         ranging from minor problems like a loose gas cap to more
//                         serious concerns such as a malfunctioning engine
//                         component. When the light comes on, it is essential to
//                         have your vehicle diagnosed by a professional
//                         technician. At Carsy, we use advanced diagnostic tools
//                         to read the error codes and identify the underlying
//                         issue. Our team will then provide a detailed explanation
//                         and recommend the necessary repairs to ensure your
//                         vehicle operates efficiently and safely.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//               </div>
//               <div
//                 data-w-id="87bb22ab-e18b-4f40-c705-713a25c4513c"
                
//                 className="faq-grid-item"
//               >
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         Do you offer fleet services?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         Yes, we provide specialized fleet services for
//                         businesses. Our fleet maintenance and repair services
//                         ensure that your company's vehicles are always in top
//                         condition, minimizing downtime and maximizing
//                         efficiency. We offer tailored service packages, priority
//                         scheduling, and detailed reporting to help manage your
//                         fleet effectively.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         Can you help with car customization?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         Yes, we offer car customization services. Whether you
//                         want to upgrade your vehicle's performance, enhance its
//                         appearance, or add new features, our team can assist
//                         with a variety of customization options. From installing
//                         aftermarket parts to custom paint jobs and interior
//                         modifications, we tailor our services to meet your
//                         specific desires.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         How often should I service my car?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         The frequency of service depends on your vehicle's make,
//                         model, and driving conditions. Generally, routine
//                         maintenance such as oil changes, tire rotations, and
//                         brake inspections should be done every 3,000 to 5,000
//                         miles. More extensive services like transmission checks,
//                         coolant flushes, and timing belt replacements follow the
//                         manufacturer's recommended schedule. Our team can help
//                         you develop a personalized maintenance plan based on
//                         your vehicle's needs.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//                 <div
//                   data-delay="0"
//                   data-hover="false"
//                   className="faq-dropdown-down w-dropdown"
//                 >
//                   <div className="faq-toggle-2 w-dropdown-toggle">
//                     <div className="faq-question-2">
//                       <div className="faq-hero-title-dark">
//                         What makes your service unique?
//                       </div>
//                       <div className="faq-icon-con">
//                         <div className="faq-icon">
//                           <div className="plus-dark"></div>
//                           <div className="minus-dark"></div>
//                         </div>
//                       </div>
//                     </div>
//                     <div className="faq-bottom-line"></div>
//                   </div>
//                   <nav className="faq-dropdown-list w-dropdown-list">
//                     <div className="faq-answer-2">
//                       <p className="par-answer-faq-dark">
//                         Our service is unique because we prioritize customer
//                         satisfaction through personalized care, advanced
//                         diagnostic tools, and a commitment to quality. We
//                         provide detailed inspections and transparent reports,
//                         allowing you to understand your vehicle's condition
//                         clearly. Our comfortable waiting area, free Wi-Fi, and
//                         complimentary refreshments make your visit pleasant
//                         while our efficient service ensures minimal wait times.
//                       </p>
//                     </div>
//                   </nav>
//                 </div>
//               </div>
//             </div>
//           </div>
//           <div className="gradient-wrapper grad-wrapper-3">
//             <div
//               data-w-id="87bb22ab-e18b-4f40-c705-713a25c451ae"
              
//               className="red-grad-9"
//             ></div>
//             <div
//               data-w-id="87bb22ab-e18b-4f40-c705-713a25c451af"
              
//               className="red-grad-7"
//             ></div>
//           </div>
//         </section>
//       </div>
//     </div>
//   );
// }

// export default ContactSection;




"use client";

import React, { useState } from "react";
import { getImageUrl } from "@/lib/fetchContactSectionPageData"; // Adjust path to your API utilities

interface ContactSectionPageData {
  contactFormSection: {
    show: boolean;
    className?: string;
    backgroundColor?: string;
    containerClassName?: string;
    gridClassName?: string;
    leftColumn: {
      show: boolean;
      className?: string;
      nodeId?: string;
      backgroundImage?: any;
      backgroundImageAlt?: string;
      backgroundColor?: string;
    };
    rightColumn: {
      show: boolean;
      className?: string;
      nodeId?: string;
      formContainerClassName?: string;
      subscribeFormClassName?: string;
    };
    formContent: {
      subtitleText: string;
      subtitleColor?: string;
      subtitleClassName?: string;
      subtitleWrapperClassName?: string;
      titleText: string;
      titleColor?: string;
      titleClassName?: string;
      descriptionText: string;
      descriptionColor?: string;
      descriptionClassName?: string;
    };
    formConfiguration: {
      formId: string;
      formName: string;
      formMethod: "get" | "post";
      formClassName?: string;
      successMessage: string;
      successMessageBody: string;
      errorMessage: string;
      errorMessageBody: string;
    };
    formFields: Array<{
      fieldName: string;
      fieldId: string;
      fieldType: "text" | "email" | "tel" | "textarea" | "select" | "checkbox";
      placeholder?: string;
      dataName?: string;
      required: boolean;
      maxLength?: number;
      className?: string;
      wrapperClassName?: string;
      rowPosition: "grid" | "full";
    }>;
    submitButton: {
      text: string;
      className?: string;
      waitText: string;
      backgroundColor?: string;
      textColor?: string;
      hoverBackgroundColor?: string;
      wrapperClassName?: string;
    };
    decorativeSquares: {
      show: boolean;
      squareClassName?: string;
      topLeftClassName?: string;
      topRightClassName?: string;
      bottomLeftClassName?: string;
      bottomRightClassName?: string;
      squareSize?: string;
      squareColor?: string;
      squareOpacity?: string;
    };
    dividerLines: {
      show: boolean;
      topLineClassName?: string;
      bottomLineClassName?: string;
      lineColor?: string;
      lineHeight?: string;
    };
    videoBackground: {
      show: boolean;
      wrapperClassName?: string;
      videoClassName?: string;
      posterUrl?: string;
      posterUpload?: any;
      videoMp4Url?: string;
      videoWebmUrl?: string;
      videoUploadMp4?: any;
      videoUploadWebm?: any;
      autoplay: boolean;
      loop: boolean;
      muted: boolean;
      playsInline: boolean;
      objectFit: "cover" | "contain" | "fill";
      overlayClassName?: string;
      overlayColor?: string;
      overlayOpacity?: string;
    };
  };
  faqSection: {
    show: boolean;
    sectionClassName?: string;
    wrapperClassName?: string;
    backgroundColor?: string;
    faqHeader: {
      subtitleText: string;
      subtitleColor?: string;
      subtitleClassName?: string;
      titleText: string;
      titleColor?: string;
      titleClassName?: string;
      ctaButtonText: string;
      ctaButtonUrl: string;
      ctaButtonClassName?: string;
      ctaButtonColor?: string;
      ctaButtonHoverColor?: string;
    };
    faqItems: Array<{
      question: string;
      answer: string;
      questionClassName?: string;
      answerClassName?: string;
      dropdownClassName?: string;
      toggleClassName?: string;
      isExpanded: boolean;
    }>;
    faqGridLayout: {
      containerClassName?: string;
      wrapperClassName?: string;
      itemClassName?: string;
      gridColumns: string;
      gridColumnsMobile: string;
      gridGap?: string;
    };
    faqStyling: {
      questionColor?: string;
      answerColor?: string;
      borderColor?: string;
      borderWidth?: string;
      hoverBackgroundColor?: string;
      backgroundColor?: string;
      iconColor?: string;
      iconHoverColor?: string;
    };
    gradientDecoration: {
      show: boolean;
      wrapperClassName?: string;
      gradient1ClassName?: string;
      gradient2ClassName?: string;
      gradient1Color?: string;
      gradient2Color?: string;
    };
  };
  sectionOrder: Array<{ section: string }>;
  globalStyles: {
    containerMaxWidth?: string;
    containerPadding?: string;
    sectionSpacing?: string;
    fontFamily?: string;
    primaryColor?: string;
    secondaryColor?: string;
    textColor?: string;
    backgroundColor?: string;
  };
  typographySettings: {
    h1FontSize?: string;
    h1Color?: string;
    h1FontWeight?: string;
    h2FontSize?: string;
    h2Color?: string;
    h2FontWeight?: string;
    h6FontSize?: string;
    h6Color?: string;
    h6FontWeight?: string;
    bodyFontSize?: string;
    bodyLineHeight?: string;
    paragraphSpacing?: string;
  };
  formStyling: {
    inputBackgroundColor?: string;
    inputTextColor?: string;
    inputBorderColor?: string;
    inputBorderWidth?: string;
    inputBorderRadius?: string;
    inputFocusBorderColor?: string;
    inputPlaceholderColor?: string;
    inputPadding?: string;
    textareaHeight?: string;
    fieldSpacing?: string;
  };
}

interface ContactSectionProps {
  data?: ContactSectionPageData; // Made optional
}

const ContactSection: React.FC<ContactSectionProps> = ({ data }) => {
  // Guard clause: Handle missing data
  if (!data) {
    return (
      <main id="main">
        <div style={{ padding: "2rem", textAlign: "center" }}>
          <p>Loading contact section...</p>
        </div>
      </main>
    );
  }

  const {
    contactFormSection,
    faqSection,
    sectionOrder,
    globalStyles,
    typographySettings,
    formStyling,
  } = data;

  const [expanded, setExpanded] = useState(
    new Set(
      faqSection.faqItems
        .map((item, i) => (item.isExpanded ? i : -1))
        .filter((i) => i >= 0)
    )
  );

  const toggleFaq = (index: number) => {
    setExpanded((prev) => {
      const newSet = new Set(prev);
      if (newSet.has(index)) {
        newSet.delete(index);
      } else {
        newSet.add(index);
      }
      return newSet;
    });
  };

  const renderFormField = (field: any) => {
    const commonProps = {
      maxLength: field.maxLength || 256,
      name: field.fieldName,
      "data-name": field.dataName || field.fieldName,
      placeholder: field.placeholder || "",
      id: field.fieldId,
      required: field.required,
      className:
        field.className ||
        (field.fieldType === "textarea"
          ? "form-textarea w-input"
          : "form-input w-input"),
      style: {
        backgroundColor: formStyling.inputBackgroundColor,
        color: formStyling.inputTextColor,
        border: `${formStyling.inputBorderWidth || "1px"} solid ${
          formStyling.inputBorderColor || "transparent"
        }`,
        borderRadius: formStyling.inputBorderRadius,
        padding: formStyling.inputPadding,
      },
    };

    const wrapper = (
      <div className={field.wrapperClassName || "form-input-wrapper"}>
        {field.fieldType === "textarea" ? (
          <textarea
            {...commonProps}
            style={{
              ...commonProps.style,
              height: formStyling.textareaHeight || "auto",
            }}
          />
        ) : (
          <input type={field.fieldType} {...commonProps} />
        )}
      </div>
    );

    return wrapper;
  };

  const renderFormFields = (formFields: any[]) => {
    const gridFields = formFields.filter((f) => f.rowPosition === "grid");
    const fullFields = formFields.filter((f) => f.rowPosition === "full");

    return (
      <>
        {Array.from({ length: Math.ceil(gridFields.length / 2) }, (_, i) => (
          <div key={`grid-${i}`} className="grid-contact-input">
            {gridFields
              .slice(i * 2, (i + 1) * 2)
              .map((field) => renderFormField(field))}
          </div>
        ))}
        {fullFields.map((field) => (
          <div key={field.fieldId} className="contact-form-inputs">
            {renderFormField(field)}
          </div>
        ))}
      </>
    );
  };

  const renderFaqItem = (item: any, index: number, isOpen: boolean) => (
    <div
      data-delay="0"
      data-hover="false"
      className={`${item.dropdownClassName || "faq-dropdown-down w-dropdown"} ${
        isOpen ? "w--open" : ""
      }`}
    >
      <div
        className={item.toggleClassName || "faq-toggle-2 w-dropdown-toggle"}
        onClick={() => toggleFaq(index)}
      >
        <div className="faq-question-2">
          <div
            className={item.questionClassName || "faq-hero-title-dark"}
            style={{ color: data.faqSection.faqStyling.questionColor }}
          >
            {item.question}
          </div>
          <div className="faq-icon-con">
            <div className="faq-icon">
              <div className="plus-dark"></div>
              <div className="minus-dark"></div>
            </div>
          </div>
        </div>
        <div className="faq-bottom-line"></div>
      </div>
      <nav className="faq-dropdown-list w-dropdown-list">
        <div className="faq-answer-2">
          <p
            className={item.answerClassName || "par-answer-faq-dark"}
            style={{ color: data.faqSection.faqStyling.answerColor }}
          >
            {item.answer}
          </p>
        </div>
      </nav>
    </div>
  );

  const renderSection = (section: string) => {
    switch (section) {
      case "contactForm":
        if (!contactFormSection.show) return null;
        const {
          leftColumn,
          rightColumn,
          formContent,
          formConfiguration,
          formFields,
          submitButton,
          decorativeSquares,
          dividerLines,
          videoBackground,
        } = contactFormSection;
        const leftBgUrl = getImageUrl(leftColumn.backgroundImage);
        const posterUrl =
          videoBackground.posterUrl ||
          getImageUrl(videoBackground.posterUpload);
        const mp4Url =
          videoBackground.videoMp4Url ||
          getImageUrl(videoBackground.videoUploadMp4);
        const webmUrl =
          videoBackground.videoWebmUrl ||
          getImageUrl(videoBackground.videoUploadWebm);
        return (
          <section
            className={contactFormSection.className || "contact-us-section"}
            style={{ backgroundColor: contactFormSection.backgroundColor }}
          >
            <div
              className={
                contactFormSection.containerClassName || "contact-container"
              }
            >
              <div
                className={
                  contactFormSection.gridClassName || "contact-us-column-grid"
                }
              >
                {leftColumn.show && (
                  <div
                    id={leftColumn.nodeId}
                    className={leftColumn.className || "grid-column-left"}
                    style={{
                      backgroundColor: leftColumn.backgroundColor,
                      backgroundImage: leftBgUrl
                        ? `url(${leftBgUrl})`
                        : undefined,
                    }}
                  >
                    {leftColumn.backgroundImageAlt && (
                      <img
                        src={leftBgUrl}
                        alt={leftColumn.backgroundImageAlt}
                        style={{ display: "none" }}
                      />
                    )}
                  </div>
                )}
                {rightColumn.show && (
                  <div
                    id={rightColumn.nodeId}
                    className={rightColumn.className || "grid-col-right"}
                  >
                    <div
                      className={
                        rightColumn.formContainerClassName ||
                        "form-contacts-right"
                      }
                    >
                      <div
                        className={
                          rightColumn.subscribeFormClassName ||
                          "subscribe-form-2"
                        }
                      >
                        <div className="form-text-wrapper">
                          <div className="top-form-wrapper">
                            <div
                              data-w-id="78c3fced-68de-f04d-8282-61f416ab32d6"
                              className={
                                formContent.subtitleWrapperClassName ||
                                "subtitle-wrap"
                              }
                            >
                              <h6
                                className={
                                  formContent.subtitleClassName ||
                                  "black-subtitle"
                                }
                                style={{
                                  color: formContent.subtitleColor,
                                  fontSize: typographySettings.h6FontSize,
                                  fontWeight: typographySettings.h6FontWeight,
                                }}
                              >
                                {formContent.subtitleText}
                              </h6>
                            </div>
                            <h1
                              data-w-id="78c3fced-68de-f04d-8282-61f416ab32d9"
                              className={
                                formContent.titleClassName ||
                                "contact-us-top-title"
                              }
                              style={{
                                color: formContent.titleColor,
                                fontSize: typographySettings.h1FontSize,
                                fontWeight: typographySettings.h1FontWeight,
                              }}
                            >
                              {formContent.titleText}
                            </h1>
                          </div>
                          <p
                            data-w-id="78c3fced-68de-f04d-8282-61f416ab32db"
                            className={
                              formContent.descriptionClassName ||
                              "form-description"
                            }
                            style={{
                              color: formContent.descriptionColor,
                              fontSize: typographySettings.bodyFontSize,
                              lineHeight: typographySettings.bodyLineHeight,
                            }}
                          >
                            {formContent.descriptionText}
                          </p>
                        </div>
                        <div
                          data-w-id="78c3fced-68de-f04d-8282-61f416ab32dd"
                          className="large-contacts-form"
                        >
                          <div className="pop-up-form w-form">
                            <form
                              id={formConfiguration.formId}
                              name={formConfiguration.formName}
                              data-name={formConfiguration.formName}
                              method={formConfiguration.formMethod}
                              className={
                                formConfiguration.formClassName ||
                                "contacts-form"
                              }
                              data-wf-page-id="669e1212d181ce4bfbbea1d4"
                              data-wf-element-id="78c3fced-68de-f04d-8282-61f416ab32df"
                            >
                              {renderFormFields(formFields)}
                              <div
                                className={
                                  submitButton.wrapperClassName ||
                                  "form-hero-btn"
                                }
                                style={{ pointerEvents: "none" }}
                              >
                                <input
                                  type="submit"
                                  data-wait={submitButton.waitText}
                                  className={
                                    submitButton.className ||
                                    "primary-button-form w-button"
                                  }
                                  value={submitButton.text}
                                  style={{
                                    backgroundColor:
                                      submitButton.backgroundColor,
                                    color: submitButton.textColor,
                                  }}
                                />
                              </div>
                            </form>
                            <div className="succes-message-transparent w-form-done">
                              <div className="success-circle-wrapper">
                                <div className="success-text">
                                  <span className="thank-you-text">
                                    {formConfiguration.successMessage}
                                  </span>
                                  {formConfiguration.successMessageBody}
                                </div>
                              </div>
                            </div>
                            <div className="error-project-message w-form-fail">
                              <div className="error-text">
                                <span className="error-span">
                                  {formConfiguration.errorMessage}
                                </span>
                                {formConfiguration.errorMessageBody}
                              </div>
                            </div>
                          </div>
                        </div>
                        {decorativeSquares.show && (
                          <>
                            <div
                              className={
                                decorativeSquares.topLeftClassName ||
                                "page-square-print form-top-left"
                              }
                              style={{
                                width: decorativeSquares.squareSize,
                                height: decorativeSquares.squareSize,
                                backgroundColor: decorativeSquares.squareColor,
                                opacity: decorativeSquares.squareOpacity,
                              }}
                            ></div>
                            <div
                              className={
                                decorativeSquares.topRightClassName ||
                                "page-square-print form-top-right"
                              }
                              style={{
                                width: decorativeSquares.squareSize,
                                height: decorativeSquares.squareSize,
                                backgroundColor: decorativeSquares.squareColor,
                                opacity: decorativeSquares.squareOpacity,
                              }}
                            ></div>
                            <div
                              className={
                                decorativeSquares.bottomLeftClassName ||
                                "page-square-print form-bottom-left"
                              }
                              style={{
                                width: decorativeSquares.squareSize,
                                height: decorativeSquares.squareSize,
                                backgroundColor: decorativeSquares.squareColor,
                                opacity: decorativeSquares.squareOpacity,
                              }}
                            ></div>
                            <div
                              className={
                                decorativeSquares.bottomRightClassName ||
                                "page-square-print form-bottom-right"
                              }
                              style={{
                                width: decorativeSquares.squareSize,
                                height: decorativeSquares.squareSize,
                                backgroundColor: decorativeSquares.squareColor,
                                opacity: decorativeSquares.squareOpacity,
                              }}
                            ></div>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                )}
                {dividerLines.show && (
                  <>
                    <div
                      className={
                        dividerLines.topLineClassName ||
                        "top-cta-line contact-us"
                      }
                      style={{
                        backgroundColor: dividerLines.lineColor,
                        height: dividerLines.lineHeight || "2px",
                      }}
                    ></div>
                    <div
                      className={
                        dividerLines.bottomLineClassName ||
                        "bottom-cta-line contact-us"
                      }
                      style={{
                        backgroundColor: dividerLines.lineColor,
                        height: dividerLines.lineHeight || "2px",
                      }}
                    ></div>
                  </>
                )}
              </div>
            </div>
            {videoBackground.show && (
              <div
                className={
                  videoBackground.wrapperClassName || "contact-video-wrapper"
                }
              >
                <div
                  data-poster-url={posterUrl}
                  data-video-urls={`${mp4Url},${webmUrl}`}
                  data-autoplay={videoBackground.autoplay ? "true" : "false"}
                  data-loop={videoBackground.loop ? "true" : "false"}
                  className={
                    videoBackground.videoClassName ||
                    "cta-hero-video-banner w-background-video w-background-video-atom"
                  }
                  data-wf-ignore="true"
                >
                  <video
                    id="9d342e77-3e3b-a55a-ed5d-00e6fcdd5823-video"
                    autoPlay={videoBackground.autoplay}
                    loop={videoBackground.loop}
                    style={{
                      backgroundImage: `url("${posterUrl}")`,
                    }}
                    muted={videoBackground.muted}
                    playsInline={videoBackground.playsInline}
                    data-wf-ignore="true"
                    data-object-fit={videoBackground.objectFit}
                  >
                    <source
                      src={mp4Url}
                      data-wf-ignore="true"
                      type="video/mp4"
                    />
                    <source
                      src={webmUrl}
                      data-wf-ignore="true"
                      type="video/webm"
                    />
                  </video>
                  <div
                    className={
                      videoBackground.overlayClassName || "cta-overlay"
                    }
                    style={{
                      backgroundColor: videoBackground.overlayColor,
                      opacity: videoBackground.overlayOpacity,
                    }}
                  ></div>
                </div>
              </div>
            )}
          </section>
        );

      case "faq":
        if (!faqSection.show) return null;
        const {
          faqHeader,
          faqItems,
          faqGridLayout,
          faqStyling,
          gradientDecoration,
        } = faqSection;
        const half = Math.ceil(faqItems.length / 2);
        const leftItems = faqItems.slice(0, half);
        const rightItems = faqItems.slice(half);
        return (
          <div
            className={faqSection.wrapperClassName || "relative-page-wrapper"}
          >
            <section
              className={
                faqSection.sectionClassName || "section top-smaller-space"
              }
              style={{ backgroundColor: faqSection.backgroundColor }}
            >
              <div
                className={faqGridLayout.containerClassName || "base-container"}
              >
                <div className="top-title-wrapper">
                  <div className="flex-wrap-left">
                    <div className="subtitle-wrap">
                      <h6
                        data-w-id="3550ba95-b759-eb1e-2404-477f761866b3"
                        className={
                          faqHeader.subtitleClassName || "black-subtitle"
                        }
                        style={{
                          color:
                            faqHeader.subtitleColor ||
                            typographySettings.h6Color,
                          fontSize: typographySettings.h6FontSize,
                          fontWeight: typographySettings.h6FontWeight,
                        }}
                      >
                        {faqHeader.subtitleText}
                      </h6>
                    </div>
                    <h2
                      data-w-id="3550ba95-b759-eb1e-2404-477f761866b5"
                      className={faqHeader.titleClassName || "shop-title"}
                      style={{
                        color:
                          faqHeader.titleColor || typographySettings.h2Color,
                        fontSize: typographySettings.h2FontSize,
                        fontWeight: typographySettings.h2FontWeight,
                      }}
                    >
                      {faqHeader.titleText}
                    </h2>
                  </div>
                  <div
                    data-w-id="3550ba95-b759-eb1e-2404-477f761866b7"
                    className="flex-wrap-right"
                  >
                    <a
                      href={faqHeader.ctaButtonUrl}
                      className={
                        faqHeader.ctaButtonClassName ||
                        "primary-button w-button"
                      }
                      style={{
                        color: faqHeader.ctaButtonColor,
                      }}
                    >
                      {faqHeader.ctaButtonText}
                    </a>
                  </div>
                </div>
                <div
                  className={
                    faqGridLayout.wrapperClassName || "grid-faq-wrapper"
                  }
                  style={{
                    gridTemplateColumns: `repeat(${faqGridLayout.gridColumns}, 1fr)`,
                    gap: faqGridLayout.gridGap,
                  }}
                >
                  <div
                    data-w-id="87bb22ab-e18b-4f40-c705-713a25c450cb"
                    className={faqGridLayout.itemClassName || "faq-grid-item"}
                  >
                    {leftItems.map((item, idx) =>
                      renderFaqItem(item, idx, expanded.has(idx))
                    )}
                  </div>
                  <div
                    data-w-id="87bb22ab-e18b-4f40-c705-713a25c4513c"
                    className={faqGridLayout.itemClassName || "faq-grid-item"}
                  >
                    {rightItems.map((item, idx) =>
                      renderFaqItem(item, half + idx, expanded.has(half + idx))
                    )}
                  </div>
                </div>
              </div>
              {gradientDecoration.show && (
                <div
                  className={
                    gradientDecoration.wrapperClassName ||
                    "gradient-wrapper grad-wrapper-3"
                  }
                >
                  <div
                    data-w-id="87bb22ab-e18b-4f40-c705-713a25c451ae"
                    className={
                      gradientDecoration.gradient1ClassName || "red-grad-9"
                    }
                    style={{
                      backgroundColor: gradientDecoration.gradient1Color,
                    }}
                  ></div>
                  <div
                    data-w-id="87bb22ab-e18b-4f40-c705-713a25c451af"
                    className={
                      gradientDecoration.gradient2ClassName || "red-grad-7"
                    }
                    style={{
                      backgroundColor: gradientDecoration.gradient2Color,
                    }}
                  ></div>
                </div>
              )}
            </section>
          </div>
        );

      default:
        return null;
    }
  };

  return (
    <main
      id="main"
      style={{
        maxWidth: globalStyles.containerMaxWidth,
        padding: globalStyles.containerPadding,
        fontFamily: globalStyles.fontFamily,
        color: globalStyles.textColor,
        backgroundColor: globalStyles.backgroundColor,
        margin: "0 auto",
      }}
    >
      {sectionOrder.map((item, index) => (
        <React.Fragment key={index}>
          {renderSection(item.section)}
        </React.Fragment>
      ))}
    </main>
  );
};

export default ContactSection;